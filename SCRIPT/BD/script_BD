//Base de datos del proyecto

create table PERIODO(
    cod_periodo integer PRIMARY KEY AUTO_INCREMENT,
    periodo varchar(10),
    fecha_inicio date,
    fecha_final date);

CREATE TABLE USUARIOS(
    codigo integer PRIMARY KEY AUTO_INCREMENT,
    rol varchar(15) not null,
    tipo_documento varchar(22) not null,
    num_documento integer not null,
    usuario varchar(35) NOT null,
    contrasena varchar(20) NOT null,
    nombre1 varchar(12) NOT null,
    nombre2 varchar(12),
    apellido1 varchar(12) not null,
    apellido2 varchar(12) not null,
    edad integer not null,
    sexo varchar(1) not null,
    lugar_nacimiento varchar(15) not null,
    fecha_nacimiento date not null,
    telefono bigint,
    direccion varchar(25) not null,
    eps varchar(20),
    correo varchar(40),
    formacion_academica varchar(20),
    cod_grado integer
);

create table ASIGNATURAS(
	cod_asig varchar(7) PRIMARY KEY,
    asignatura varchar(22) not null);
    
create table GRADOS(
    cod_grado integer PRIMARY KEY,
    usuario_docente integer not null,
    nom_grado varchar(10),
    fecha_inicio date,
    fecha_final date,
    FOREIGN KEY(usuario_docente) REFERENCES usuarios(codigo)
);

alter table usuarios add foreign key(cod_grado) REFERENCES grados(cod_grado);

create table ASOC_ASIG_GRADOS(
    cod_asig varchar(7) not null,
    nom_asig varchar(20) not null,
    cod_grado integer not null,
    nom_grado integer not null,
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado)
);

create table ASIGNATURAS_ALUMNOS(
    cod_asig varchar(7) not null,
    usuario_alumno integer not null,
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig),
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo)
);

create table asoc_docente_asig(
    cod_asig varchar(7),
    usuario_docente integer,
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig),
    FOREIGN KEY(usuario_docente) REFERENCES usuarios(codigo)
);

create table notas(
    cod_notas integer PRIMARY KEY AUTO_INCREMENT,
    usuario_alumno integer not null,
    valor integer not null,
    cod_asig varchar(7) not null,
    cod_grado integer not null,
    cod_periodo integer not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo),
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado),
    FOREIGN KEY(cod_periodo) REFERENCES periodo(cod_periodo)
);

create table acudientes(
    codigo integer PRIMARY KEY AUTO_INCREMENT,
    tipo_documento varchar(7) not null,
    num_documento integer not null,
     nombre1 varchar(12) not null,
    nombre2 varchar(12),
    apellido1 varchar(12) not null,
    apellido2 varchar(12) not null,
    telefono integer,
    parentesco integer not null,
    usuario_alumno int not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo)  
);

create table asistencias(
    cod_asist integer PRIMARY KEY AUTO_INCREMENT,
    usuario_alumno integer not null,
    usuario_docente integer not null,
    cod_grado integer not null,
    fecha date not null,
    estao boolean not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo),
    FOREIGN KEY(usuario_docente) REFERENCES usuarios(codigo),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado)
);

create table pago(
    cod_pago integer PRIMARY KEY AUTO_INCREMENT,
    usuario_alumno integer not null,
    cod_grado integer not null,
    fecha_cancelar date not null,
    mes_cancelar varchar(9) not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado)
);

//Usuario docente
insert into usuarios (rol, tipo_documento, num_documento, usuario, contrasena, nombre1, apellido1, apellido2, edad, sexo, lugar_nacimiento, fecha_nacimiento, telefono, direccion, eps, correo, formacion_academica)
VALUES("DOCENTE", "CC", 72345986, "abcd@efg.com", "abcd", "PATRICIA", "OROZCO", "PEREZ", 32, "F", "BARRANQUILLA", '1990-06-15', 3155008713, "KRA 21 #50 - 33A
", "SALUD TOTAL", "patriorpe@hotmail.com", "PEDAGOGÍA INFANTIL");

insert into usuarios (rol, tipo_documento, num_documento, usuario, contrasena, nombre1, nombre2, apellido1, apellido2, edad, sexo, lugar_nacimiento, fecha_nacimiento, telefono, direccion, eps, correo, formacion_academica)
VALUES("DOCENTE", "CC", 32456798, "abcd@efg.com", "efgh", "MARIA", "INES", "FERNANDEZ", "ARAUGO", 26, "F", "SABANALARGA", '1997-02-15', 3004327890, "CALLE 50 #14 - 22A
", "FAMISANAR LTDA", "laulilo@gmail.com", "PEDAGOGÍA INFANTIL");

insert into usuarios (rol, tipo_documento, num_documento, usuario, contrasena, nombre1, 
apellido1, apellido2, edad, sexo, lugar_nacimiento, fecha_nacimiento, telefono, direccion, eps, correo, formacion_academica)
VALUES("DOCENTE", "CC", 72341209, "ijkL@mnñ.com", "ijkl", "LAURA", "LOPEZ", "MARTINEZ", 
30, "F", "SOLEDAD", '1992-06-15', 3003784563, "CALLE 40 #8 - 3C", "SANITAS S.A", "laulilo@gmail.com", "PSICOLOGÍA - PEDAGOGÍA INFANTIL");

//UPDATE usuarios SET correo = "laulilo@gmail.com" WHERE codigo=2;
//ALTER TABLE usuarios MODIFY COLUMN formacion_academica varchar(100);
//alter table usuarios MODIFY COLUMN telefono bigint;

insert into usuarios (rol, tipo_documento, num_documento, usuario, contrasena, nombre1, nombre2, apellido1, apellido2, edad, sexo, 
lugar_nacimiento, fecha_nacimiento, telefono, direccion, eps, correo, formacion_academica)
VALUES("DOCENTE", "CC", 34562387, "mnño@pqrs.com", "mñno", "LILY", "LAU", "CAMPO", "FERRER", 28, "F", "SOLEDAD", '1995-04-25', 3005632145, "CALLE 19 #24 - 27D", "SALUD TOTAL", "ferrecampolily@outlook.es", "PEDAGOGÍA INFANTIL");

//Asignaturas
insert into asignaturas 
VALUES("ART", "ARTÍSTICA"),
("CI_NA", "CIENCIAS NATURALES"),
("COM_LEC", "COMPRENSIÓN LECTORA"),
("ED_CRI", "EDUCACIÓN CRISTIANA"),
("ED_FI", "EDUCACIÓN FÍSICA"),
("ESP", "ESPAÑOL"),
("INF", "INFORMÁTICA"),
("ING", "INGLES"),
("MAT", "MATEMÁTICAS"),
("SOC", "SOCIALES");

//Grados
insert into grados
VALUES(1, 1, "PRE JARDÍN", '2023-02-06', '2023-11-17'),
(2, 2, "JARDÍN", '2023-02-06', '2023-11-17'),
(3, 3, "TRANSICIÓN", '2023-02-06', '2023-11-17'),
(4, 3, "PRIMERO", '2023-02-06', '2023-11-17');

//Alumnos
insert into usuarios (rol,tipo_documento, num_documento, usuario, contrasena, nombre1, nombre2, apellido1, apellido2, edad, sexo, lugar_nacimiento, fecha_nacimiento, telefono, direccion, eps, cod_grado)
VALUES("ESTUDIANTE","TI",1043144567,"ab1@gmail.com","ab1", "LAURA","PATRICIA","PATIÑO","MORA",6,"F","SOLEDAD",'2017-01-26',3154988751,"CALLE 15 #21-44B", "SALUD TOTAL", 4),

("ESTUDIANTE","REGISTRO CIVIL",19934553312,"aC1@gmail.com","aC1", "FERNANDO","ENRRIQUE","ROSADO","FERRER",3,"M","SOLEDAD",'2020-03-21',3009872312,"CALLE 20 #22-43C", "SALUD TOTAL", 1),

("ESTUDIANTE","REGISTRO CIVIL",1934897234,"aD1@gmail.com","aD1", "EMILY","","QUINTERO","LOPEZ",4,"F","SABANALARGA",'2018-12-21',3156772345,"DIAG 27C #6A-4", "SANITAS", 2),

("ESTUDIANTE","REGISTRO CIVIL",1045233776,"aE2@gmail.com","aE2", "LIPSY","","MONTERO","VIÑA",5,"F","BARRANQUILLA",'2018-11-01',3218764321,"KRA 1C #45A-4", "MUTUALSER", 3);
