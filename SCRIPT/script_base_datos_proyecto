
create database PROYECTO;
use proyecto;

create table GRADOS(
    cod_grado integer,
    nombre varchar(10),
    fecha_inicio date,
    fecha_final date,
    primary key(cod_grado));


create table USUARIOS(
    Codigo integer,
    Tipo_de_usuario Varchar(13),
    Tipo_de_documento Varchar(14),
    Numero_documento integer,
    Usuario varchar(30);
    Contrasenia varchar(20),
    Nombre 1 Varchar(20),
    Nombre 2 Varchar(20),
    Apellido 1 varchar(20),
    Apellido 2 varchar(20),
    Edad integer,
    Sexo Varchar(1),
    Lugar_nacimiento varchar(15),
    Fecha_nacimiento date,
    Telefono integer,
    Direccion varchar(22),
    Seguridad_social varchar(20),
    Correo varchar(40),
    Formacion_academica varchar(20),
    codigo_grado integer,
    primary key(codigo),
    foreign key(codigo_grado) references grados(cod_grados));

    create table ASIGNATURAS(
        cod_asig varchar(7),
        usuario_docente integer,
        nombre varchar(20),
        primary key(cod_asig),
        foreign key(usuario_docente) references usuario(codigo));

    create table ASIGNATURAS_ALUMNOS(
        codigo integer,
        cod_asig varchar(7),
        usuario_alumno integer,
        primary key(codigo),
        foreign key(cod_asig) references ASIGNATURAS(cod_asig),
        foreign key(usuario_alumno) references usuario(codigo));

    create table ASOCIACION_ASIG_DOCENTES(
        codigo integer,
        usuario_docente integer,
        cod_asig varchar(7),
        nombre varchar(10),
        fecha_inicio date,
        fecha_final date,
        primary key(codigo),
        foreign key(usuario_docente) references usuario(codigo),
        foreign key(cod_asig) references ASIGNATURAS(cod_asig));

    
    create table ASISTENCIAS(
        cod_asist integer,
        usuario_alumno integer,
        usuario_docente integer,
        cod_grado integer,
        mes varchar(10),
        fecha date,
        estado varchar(6),
        primary key(cod_asist),
        foreign key(usuario_alumno) references usuario(codigo),
        foreign key(usuario_docente) references usuario(codigo),
        foreign key(cod_grado) references grado(cod_grado));
    