//Base de datos del proyecto

create table PERIODO(
    cod_periodo integer PRIMARY KEY AUTO_INCREMENT,
    periodo varchar(10),
    fecha_inicio date,
    fecha_final date)

CREATE TABLE USUARIOS(
    codigo integer PRIMARY KEY AUTO_INCREMENT,
    rol varchar(15) not null,
    tipo_documento varchar(22) not null,
    num_documento integer not null,
    usuario varchar(35) NOT null,
    contrasena varchar(20) NOT null,
    nombre1 varchar(12) NOT null,
    nombre2 varchar(12),
    apellido1 varchar(12) not null,
    apellido2 varchar(12) not null,
    edad integer not null,
    sexo varchar(1) not null,
    lugar_nacimiento varchar(15) not null,
    fecha_nacimiento date not null,
    telefono integer,
    direccion varchar(25) not null,
    eps varchar(20),
    correo varchar(40),
    formacion_academica varchar(20),
    cod_grado integer
);

create table ASIGNATURAS(
	cod_asig varchar(7) PRIMARY KEY,
    usuario_docente integer not null,
    num_documento integer not null,
    nom_comple_docente varchar(35) not null,
    asignatura varchar(22) not null,
    FOREIGN KEY(usuario_docente) REFERENCES usuarios(codigo));
    
create table GRADOS(
    cod_grado integer PRIMARY KEY,
    usuario_docente integer not null,
    cod_asig varchar(7),
    nom_grago varchar(10),
    fecha_inicio date,
    fecha_final date,
    FOREIGN KEY(usuario_docente) REFERENCES usuarios(codigo),
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig)
);

alter table usuarios add foreign key(cod_grado) REFERENCES grados(cod_grado);

create table ASOC_ASIG_GRADOS(
    codigo integer PRIMARY KEY AUTO_INCREMENT,
    cod_asig varchar(7) not null,
    cod_grado integer not null,
    nom_asig varchar(20) not null,
    nom_grado integer not null,
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado)
);

create table ASIGNATURAS_ALUMNOS(
    codigo integer PRIMARY KEY AUTO_INCREMENT,
    cod_asig varchar(7) not null,
    usuario_alumno integer not null,
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig),
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo)
);

create table notas(
    cod_notas integer PRIMARY KEY AUTO_INCREMENT,
    usuario_alumno integer not null,
    valor integer not null,
    cod_asig varchar(7) not null,
    cod_grado integer not null,
    cod_periodo integer not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo),
    FOREIGN KEY(cod_asig) REFERENCES asignaturas(cod_asig),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado),
    FOREIGN KEY(cod_periodo) REFERENCES periodo(cod_periodo)
);

create table acudientes(
    codigo integer PRIMARY KEY AUTO_INCREMENT,
    tipo_documento varchar(7) not null,
    num_documento integer not null,
     nombre1 varchar(12) not null,
    nombre2 varchar(12),
    apellido1 varchar(12) not null,
    apellido2 varchar(12) not null,
    telefono integer,
    parentesco integer not null,
    usuario_alumno int not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo)  
);

create table asistencias(
    cod_asist integer PRIMARY KEY AUTO_INCREMENT,
    usuario_alumno integer not null,
    usuario_docente integer not null,
    cod_grado integer not null,
    fecha date not null,
    estao boolean not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo),
    FOREIGN KEY(usuario_docente) REFERENCES usuarios(codigo),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado)
);

create table pago(
    cod_pago integer PRIMARY KEY AUTO_INCREMENT,
    usuario_alumno integer not null,
    cod_grado integer not null,
    fecha_cancelar date not null,
    mes_cancelar varchar(9) not null,
    FOREIGN KEY(usuario_alumno) REFERENCES usuarios(codigo),
    FOREIGN KEY(cod_grado) REFERENCES grados(cod_grado)
);